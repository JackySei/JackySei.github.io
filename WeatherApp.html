<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>JackyNotes</title><meta name="description" content="">
    <link rel="modulepreload" href="/assets/app.4ff3870a.js"><link rel="modulepreload" href="/assets/WeatherApp.html.93966822.js"><link rel="modulepreload" href="/assets/WeatherApp.html.9cf4cf03.js"><link rel="prefetch" href="/assets/BaiduDisk.html.667ba838.js"><link rel="prefetch" href="/assets/FunCurrie.html.e2e475ea.js"><link rel="prefetch" href="/assets/index.html.6699239a.js"><link rel="prefetch" href="/assets/SchoolAndroidApp.html.bc6a9453.js"><link rel="prefetch" href="/assets/TravelWebsit.html.39ea94f4.js"><link rel="prefetch" href="/assets/VueNote.html.b43ab8ee.js"><link rel="prefetch" href="/assets/VueReactive.html.9b2d2785.js"><link rel="prefetch" href="/assets/VuexNote.html.cc1b0d19.js"><link rel="prefetch" href="/assets/WebpacktoVue.html.58ccd581.js"><link rel="prefetch" href="/assets/404.html.265028f6.js"><link rel="prefetch" href="/assets/BaiduDisk.html.a84c9b4f.js"><link rel="prefetch" href="/assets/FunCurrie.html.8f8e0855.js"><link rel="prefetch" href="/assets/index.html.738d26bf.js"><link rel="prefetch" href="/assets/SchoolAndroidApp.html.4194f0ed.js"><link rel="prefetch" href="/assets/TravelWebsit.html.ba8ed49b.js"><link rel="prefetch" href="/assets/VueNote.html.8f6b89a3.js"><link rel="prefetch" href="/assets/VueReactive.html.37f11c82.js"><link rel="prefetch" href="/assets/VuexNote.html.02b6e595.js"><link rel="prefetch" href="/assets/WebpacktoVue.html.fa678ef9.js"><link rel="prefetch" href="/assets/404.html.3de17af6.js"><link rel="prefetch" href="/assets/404.f9a75925.js"><link rel="prefetch" href="/assets/Layout.2d0acbe0.js">
    <link rel="stylesheet" href="/assets/style.96ee71b5.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">JackyNotes</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="输入标题" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading"> <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><p>参考了<a href="https://blog.csdn.net/u012416045/article/details/98329872" target="_blank" rel="noopener noreferrer">香港胖仔的博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,自己加入了一些简单的东西。作为本学期的flutter大作业。 这个app相当简单只有五个界面。 首先是欢迎界面 <img src="https://img-blog.csdnimg.cn/20210106092102593.png" alt="在这里插入图片描述"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span><span class="token punctuation">{</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatefulWidget</span><span class="token punctuation">&gt;</span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">_MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _MyApp <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyApp</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: implement build</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
        debugShowCheckedModeBanner<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        title<span class="token operator">:</span> <span class="token string">&quot;天气app&quot;</span><span class="token punctuation">,</span>
       <span class="token comment">//theme: ThemeData.dark(),</span>
        home<span class="token operator">:</span> <span class="token class-name">WelcomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">WelcomePage</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span><span class="token punctuation">{</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatefulWidget</span><span class="token punctuation">&gt;</span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: implement createState</span>
    <span class="token keyword">return</span> <span class="token function">_WelcomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _WelcomePage <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WelcomePage</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">getLocationData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async <span class="token punctuation">{</span>
      <span class="token keyword">var</span> weatherData <span class="token operator">=</span> await <span class="token class-name">WeatherModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLocationWeather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Navigator</span><span class="token punctuation">.</span><span class="token function">pushAndRemoveUntil</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token class-name">MaterialPageRoute</span><span class="token punctuation">(</span>builder<span class="token operator">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">AppHome</span><span class="token punctuation">(</span>
          locationWeather<span class="token operator">:</span> weatherData<span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>route<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// TODO: implement build</span>
    <span class="token class-name">Future</span><span class="token punctuation">.</span><span class="token function">delayed</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">(</span>seconds<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">getLocationData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      body<span class="token operator">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
          alignment<span class="token operator">:</span> <span class="token class-name">Alignment</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span>
          child<span class="token operator">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
            children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
              <span class="token class-name">Expanded</span><span class="token punctuation">(</span>
                  flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                  child<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token class-name">Expanded</span><span class="token punctuation">(</span>
                  flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                  child<span class="token operator">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
                    children<span class="token operator">:</span> <span class="token punctuation">[</span>
                      <span class="token class-name">Image</span><span class="token punctuation">(</span>image<span class="token operator">:</span> <span class="token class-name">AssetImage</span><span class="token punctuation">(</span><span class="token string">&quot;assets/images/welcome.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                      <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Welcome To Weather App&quot;</span><span class="token punctuation">,</span>style<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>fontSize<span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span>color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>blue<span class="token punctuation">,</span>fontStyle<span class="token operator">:</span> <span class="token class-name">FontStyle</span><span class="token punctuation">.</span>italic<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">]</span><span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>加载欢迎页面两秒后，调用聚合数据的api请求天气数据。</p><p>请求网络之前自定义一个工具类</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">NetworkHelper</span><span class="token punctuation">{</span>
  <span class="token class-name">NetworkHelper</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> url<span class="token punctuation">;</span>
  <span class="token class-name">Future</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async<span class="token punctuation">{</span>
    <span class="token keyword">try</span><span class="token punctuation">{</span>
      <span class="token class-name"><span class="token namespace">http<span class="token punctuation">.</span></span>Response</span> response <span class="token operator">=</span> await http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>statusCode<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> response<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">jsonDecode</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;empty&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接口类</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// const apiKey = &#39;a1229a6169b9ca8fa751980e7917fae5&#39;;</span>
<span class="token keyword">const</span> openWeatherMapURL <span class="token operator">=</span> &#39;http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>v<span class="token punctuation">.</span>juhe<span class="token punctuation">.</span>cn<span class="token operator">/</span>weather<span class="token operator">/</span>geo&#39;<span class="token punctuation">;</span>
<span class="token keyword">const</span> openCityWeatherMapURL <span class="token operator">=</span> &#39;http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>v<span class="token punctuation">.</span>juhe<span class="token punctuation">.</span>cn<span class="token operator">/</span>weather<span class="token operator">/</span>index&#39;<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">WeatherModel</span> <span class="token punctuation">{</span>
  <span class="token comment">//http://v.juhe.cn/weather/index?format=2&amp;cityname=%E8%8B%8F%E5%B7%9E&amp;key=您申请的KEY</span>
  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span>dynamic<span class="token punctuation">&gt;</span></span> <span class="token function">getCityWeather</span><span class="token punctuation">(</span><span class="token class-name">String</span> cityName<span class="token punctuation">)</span> async<span class="token punctuation">{</span>
    <span class="token class-name">NetworkHelper</span> networkHelper <span class="token operator">=</span> <span class="token class-name">NetworkHelper</span><span class="token punctuation">(</span>&#39;$openCityWeatherMapURL<span class="token operator">?</span>format<span class="token operator">=</span><span class="token number">1</span><span class="token operator">&amp;</span>key<span class="token operator">=</span>$apiKey<span class="token operator">&amp;</span>cityname<span class="token operator">=</span>$cityName<span class="token operator">&amp;</span>dtype<span class="token operator">=</span>json&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> weatherData <span class="token operator">=</span>await networkHelper<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> weatherData<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span>dynamic<span class="token punctuation">&gt;</span></span> <span class="token function">getLocationWeather</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async<span class="token punctuation">{</span>
    <span class="token class-name">Location</span> location <span class="token operator">=</span> <span class="token class-name">Location</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    await location<span class="token punctuation">.</span><span class="token function">getCurrentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">NetworkHelper</span> networkHelper <span class="token operator">=</span> <span class="token class-name">NetworkHelper</span><span class="token punctuation">(</span>
        &#39;$openWeatherMapURL<span class="token operator">?</span>format<span class="token operator">=</span><span class="token number">2</span><span class="token operator">&amp;</span>key<span class="token operator">=</span>$apiKey<span class="token operator">&amp;</span>dtype<span class="token operator">=</span>json<span class="token operator">&amp;</span>lat<span class="token operator">=</span>$<span class="token punctuation">{</span>location<span class="token punctuation">.</span>latitude<span class="token punctuation">}</span><span class="token operator">&amp;</span>lon<span class="token operator">=</span>$<span class="token punctuation">{</span>location<span class="token punctuation">.</span>longitude<span class="token punctuation">}</span>&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> weatherData <span class="token operator">=</span> await networkHelper<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> weatherData<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token keyword">int</span> temp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">&gt;</span> <span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> &#39;好热<span class="token punctuation">,</span>现在适合吃冰淇淋！&#39;<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> &#39;适合穿短袖<span class="token class-name">T</span>恤 &#39;<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> &#39;好冷<span class="token punctuation">,</span>戴上围巾和手套吧&#39;<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> &#39;温度宜人，开心玩耍吧&#39;<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>getMessage方法是设置之后界面的一些文本丰富界面。 这里说到两种请求聚合api的方式，一种是通过所处地理位置的经纬度。 获取经纬度的方式。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Location</span><span class="token punctuation">{</span>
  <span class="token keyword">double</span> latitude<span class="token punctuation">;</span>
  <span class="token keyword">double</span> longitude<span class="token punctuation">;</span>
  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCurrentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async<span class="token punctuation">{</span>
    <span class="token keyword">try</span><span class="token punctuation">{</span>
      <span class="token class-name">Position</span> position <span class="token operator">=</span> await <span class="token class-name">Geolocator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCurrentPosition</span><span class="token punctuation">(</span>desiredAccuracy<span class="token operator">:</span> <span class="token class-name">LocationAccuracy</span><span class="token punctuation">.</span>low<span class="token punctuation">)</span><span class="token punctuation">;</span>
      latitude <span class="token operator">=</span> position<span class="token punctuation">.</span>latitude<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      longitude <span class="token operator">=</span> position<span class="token punctuation">.</span>longitude<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>还有一种就是通过城市的名称。</p><p>请求的返回结果有多种情况： 1.手机没有网络的情况，会抛出一个没有网络异常，自定义返回一个字符串，方便之后的判断。 2.有网络，请求失败。 3.有网络请求成功。</p><p>最后无论是通过聚合接口还是我们自己自定义的，请求网络之后都会有一个返回值，通过不同的返回值来处理相关的逻辑。</p><p>拿到返回值后，就把返回值（无论成功与否）通过欢迎界面，传递给主界面。 主界面导航</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">AppHome</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token class-name">AppHome</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>locationWeather<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> locationWeather<span class="token punctuation">;</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatefulWidget</span><span class="token punctuation">&gt;</span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: implement createState</span>
    <span class="token keyword">return</span> <span class="token function">_HomePageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _HomePageState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AppHome</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>

  <span class="token keyword">int</span> _currentIndex<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span> _widgets<span class="token operator">=</span><span class="token class-name">List</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _widgets<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">LocationScreen</span><span class="token punctuation">(</span>locationWeather<span class="token operator">:</span> widget<span class="token punctuation">.</span>locationWeather<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _widgets<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">NewsPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _widgets<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MyPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: implement build</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      body<span class="token operator">:</span> <span class="token class-name">IndexedStack</span><span class="token punctuation">(</span>
        index<span class="token operator">:</span> _currentIndex<span class="token punctuation">,</span>
        children<span class="token operator">:</span> _widgets<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      bottomNavigationBar<span class="token operator">:</span> <span class="token class-name">BottomNavigationBar</span><span class="token punctuation">(</span>
        items<span class="token operator">:</span> <span class="token keyword">const</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BottomNavigationBarItem</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
          <span class="token class-name">BottomNavigationBarItem</span><span class="token punctuation">(</span>
            icon<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>wb_sunny<span class="token punctuation">)</span><span class="token punctuation">,</span>title<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;今日天气&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">BottomNavigationBarItem</span><span class="token punctuation">(</span>
              icon<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>library_books<span class="token punctuation">)</span><span class="token punctuation">,</span>title<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;今日目标&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">BottomNavigationBarItem</span><span class="token punctuation">(</span>
              icon<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>person<span class="token punctuation">)</span><span class="token punctuation">,</span>title<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;关于我的&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        currentIndex<span class="token operator">:</span> _currentIndex<span class="token punctuation">,</span>
        onTap<span class="token operator">:</span> _itemTapped<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">void</span> _itemTapped <span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _currentIndex<span class="token operator">=</span>index<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>一些简单的写法，不必多言。</p><p>在主界面添加子页面的时候，在把从欢迎页面请求的数据，通过主页面传递给天气页面。</p><p><img src="https://img-blog.csdnimg.cn/20210106093801196.png" alt="在这里插入图片描述"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">LocationScreen</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>

  <span class="token class-name">LocationScreen</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>locationWeather<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> locationWeather<span class="token punctuation">;</span>
  <span class="token annotation punctuation">@override</span>
  _LocationScreenState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_LocationScreenState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token keyword">class</span> _LocationScreenState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LocationScreen</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

  <span class="token class-name">WeatherModel</span> weather <span class="token operator">=</span> <span class="token class-name">WeatherModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> temperature<span class="token punctuation">;</span>
  <span class="token class-name">String</span> condition<span class="token punctuation">;</span>
  <span class="token class-name">String</span> cityName<span class="token punctuation">;</span>
  <span class="token class-name">String</span> imgId<span class="token operator">=</span><span class="token string">&quot;assets/images/init.JPG&quot;</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> weatherMessage<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">updateUI</span><span class="token punctuation">(</span>widget<span class="token punctuation">.</span>locationWeather<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">updateUI</span><span class="token punctuation">(</span>dynamic weatherData<span class="token punctuation">)</span> async <span class="token punctuation">{</span>
    <span class="token class-name">SharedPreferences</span> prefs<span class="token operator">=</span>await <span class="token class-name">SharedPreferences</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    prefs<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>&#39;temperature&#39;<span class="token punctuation">,</span> <span class="token string">&quot;∅&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    prefs<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>&#39;condition&#39;<span class="token punctuation">,</span> <span class="token string">&quot;未知&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    prefs<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>&#39;weatherMessage&#39;<span class="token punctuation">,</span> <span class="token string">&quot;没有查到天气&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    prefs<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>&#39;cityName<span class="token char">&#39;, &#39;</span>绵阳&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
    prefs<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token char">&#39;imgId&#39;</span><span class="token punctuation">,</span> &#39;assets<span class="token operator">/</span>images<span class="token operator">/</span>init<span class="token punctuation">.</span>JPG&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>weatherData<span class="token operator">==</span><span class="token string">&quot;empty&quot;</span><span class="token operator">||</span>weatherData<span class="token punctuation">[</span><span class="token char">&#39;result&#39;</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        temperature <span class="token operator">=</span> prefs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>&#39;temperature&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
        condition <span class="token operator">=</span> prefs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>&#39;condition&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
        weatherMessage <span class="token operator">=</span> prefs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>&#39;weatherMessage&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cityName <span class="token operator">=</span> prefs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>&#39;cityName&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
        imgId<span class="token operator">=</span>prefs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token char">&#39;imgId&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> result <span class="token operator">=</span> weatherData<span class="token punctuation">[</span><span class="token char">&#39;result&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> sk <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token char">&#39;sk&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> today <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token char">&#39;today&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        temperature <span class="token operator">=</span> sk<span class="token punctuation">[</span><span class="token char">&#39;temp&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        cityName <span class="token operator">=</span> weatherData<span class="token punctuation">[</span><span class="token char">&#39;result&#39;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token char">&#39;today&#39;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token char">&#39;city&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        condition <span class="token operator">=</span> today<span class="token punctuation">[</span>&#39;weather&#39;<span class="token punctuation">]</span><span class="token punctuation">;</span>
        weatherMessage <span class="token operator">=</span> weather<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>temperature<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;雨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          imgId<span class="token operator">=</span><span class="token string">&quot;assets/images/rain.jpg&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;晴&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          imgId<span class="token operator">=</span><span class="token string">&quot;assets/images/qing.png&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;多云&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          imgId<span class="token operator">=</span><span class="token string">&quot;assets/images/duoyun.png&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token operator">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>
        leading<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>wb_sunny<span class="token punctuation">,</span>color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        title<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;今日天气&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        backgroundColor<span class="token operator">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0xff343434</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
        decoration<span class="token operator">:</span> <span class="token class-name">BoxDecoration</span><span class="token punctuation">(</span>
          image<span class="token operator">:</span> <span class="token class-name">DecorationImage</span><span class="token punctuation">(</span>
            image<span class="token operator">:</span> <span class="token class-name">AssetImage</span><span class="token punctuation">(</span>imgId<span class="token operator">==</span><span class="token keyword">null</span><span class="token operator">?</span>&#39;assets<span class="token operator">/</span>images<span class="token operator">/</span>init<span class="token punctuation">.</span>JPG&#39;<span class="token operator">:</span>imgId<span class="token punctuation">)</span><span class="token punctuation">,</span>
            fit<span class="token operator">:</span> <span class="token class-name">BoxFit</span><span class="token punctuation">.</span>cover<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">//constraints: BoxConstraints.expand(),</span>
        child<span class="token operator">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
          mainAxisAlignment<span class="token operator">:</span> <span class="token class-name">MainAxisAlignment</span><span class="token punctuation">.</span>spaceBetween<span class="token punctuation">,</span>
          crossAxisAlignment<span class="token operator">:</span> <span class="token class-name">CrossAxisAlignment</span><span class="token punctuation">.</span>stretch<span class="token punctuation">,</span>
          children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
            <span class="token class-name">Row</span><span class="token punctuation">(</span>
              mainAxisAlignment<span class="token operator">:</span> <span class="token class-name">MainAxisAlignment</span><span class="token punctuation">.</span>spaceBetween<span class="token punctuation">,</span>
              children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
                <span class="token class-name">FlatButton</span><span class="token punctuation">(</span>
                  onPressed<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> async <span class="token punctuation">{</span>
                    <span class="token keyword">var</span> weatherData <span class="token operator">=</span> await weather<span class="token punctuation">.</span><span class="token function">getLocationWeather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">updateUI</span><span class="token punctuation">(</span>weatherData<span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  child<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span>
                    <span class="token class-name">Icons</span><span class="token punctuation">.</span>near_me<span class="token punctuation">,</span>
                    color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
                    size<span class="token operator">:</span> <span class="token number">50.0</span><span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">FlatButton</span><span class="token punctuation">(</span>
                  onPressed<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> async<span class="token punctuation">{</span>
                    <span class="token keyword">var</span> typedName <span class="token operator">=</span>await <span class="token class-name">Navigator</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
                      context<span class="token punctuation">,</span>
                      <span class="token class-name">MaterialPageRoute</span><span class="token punctuation">(</span>
                        builder<span class="token operator">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                          <span class="token keyword">return</span> <span class="token class-name">CityScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                      <span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>typedName<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                      <span class="token keyword">var</span> weatherData <span class="token operator">=</span> await weather<span class="token punctuation">.</span><span class="token function">getCityWeather</span><span class="token punctuation">(</span>typedName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token function">updateUI</span><span class="token punctuation">(</span>weatherData<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  child<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span>
                    <span class="token class-name">Icons</span><span class="token punctuation">.</span>location_city<span class="token punctuation">,</span>
                    color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
                    size<span class="token operator">:</span> <span class="token number">50.0</span><span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Padding</span><span class="token punctuation">(</span>
              padding<span class="token operator">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>left<span class="token operator">:</span> <span class="token number">15.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              child<span class="token operator">:</span> <span class="token class-name">Row</span><span class="token punctuation">(</span>
                children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
                  <span class="token class-name">Text</span><span class="token punctuation">(</span>
                    &#39;$temperature°&#39;<span class="token punctuation">,</span>
                    style<span class="token operator">:</span> kTempTextStyle<span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token class-name">Text</span><span class="token punctuation">(</span>
                    condition<span class="token punctuation">,</span>
                    style<span class="token operator">:</span> kConditionTextStyle<span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Padding</span><span class="token punctuation">(</span>
              padding<span class="token operator">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>right<span class="token operator">:</span> <span class="token number">15.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              child<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
                &#39;$weatherMessage in $cityName&#39;<span class="token punctuation">,</span>
                textAlign<span class="token operator">:</span> <span class="token class-name">TextAlign</span><span class="token punctuation">.</span>right<span class="token punctuation">,</span>
                style<span class="token operator">:</span> kMessageTextStyle<span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再说回之前请求的情况，如果是没有网络则捕获异常返回“empty”，如果有网络但请求失败，返回的数据中的result==null（试出来的） 通过以上代码，可以看出来，我把这两种情况放在一起，当条件满足时，加载SharedPreferences 存储好的数据（其实没必要用，我用是为了完成老师的打分点）。 <img src="https://img-blog.csdnimg.cn/20210106095259620.png" alt="在这里插入图片描述"></p><p>然后就是请求成功的情况，解析相应的json串，更新ui。通过返回的不同的天气状况，温度，设置不同的背景图片，通过getMessage（）提示不同的语句。</p><p>右上角的按钮是进入城市选择界面</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">CityScreen</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@override</span>
  _CityScreenState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_CityScreenState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _CityScreenState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CityScreen</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> cityName<span class="token punctuation">;</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      resizeToAvoidBottomInset<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      appBar<span class="token operator">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>title<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;选择城市&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> backgroundColor<span class="token operator">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0xff343434</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
        decoration<span class="token operator">:</span> <span class="token class-name">BoxDecoration</span><span class="token punctuation">(</span>
          image<span class="token operator">:</span> <span class="token class-name">DecorationImage</span><span class="token punctuation">(</span>
            image<span class="token operator">:</span> <span class="token class-name">AssetImage</span><span class="token punctuation">(</span><span class="token string">&quot;assets/images/city_bac.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            fit<span class="token operator">:</span> <span class="token class-name">BoxFit</span><span class="token punctuation">.</span>cover<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        constraints<span class="token operator">:</span> <span class="token class-name">BoxConstraints</span><span class="token punctuation">.</span><span class="token function">expand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          child<span class="token operator">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
            children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
              <span class="token class-name">Container</span><span class="token punctuation">(</span>
                padding<span class="token operator">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">20.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                child<span class="token operator">:</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span>
                  style<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
                    color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black<span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//TextStyle</span>
                  decoration<span class="token operator">:</span> kTextFieldInputDecoration<span class="token punctuation">,</span>
                  onChanged<span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    cityName <span class="token operator">=</span> value<span class="token punctuation">;</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token class-name">FlatButton</span><span class="token punctuation">(</span>
                onPressed<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token class-name">Navigator</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>cityName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                child<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
                  &#39;<span class="token class-name">Get</span> <span class="token class-name">Weather</span>&#39;<span class="token punctuation">,</span>
                  style<span class="token operator">:</span> kButtonTextStyle<span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://img-blog.csdnimg.cn/20210106095443873.png" alt="在这里插入图片描述"> 输入城市就可以查到相应城市的天气 左上角的按钮则是定位到当前位置，获取当前位置的天气。</p><p>为了完成老师的考核点，设置第二个界面设定目标界面，其实很简单。就是添加了一个文本框，点击按钮，将文本框的内容添加到下方的列表视图中，并保存到数据库中。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">NewsPage</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span><span class="token punctuation">{</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatefulWidget</span><span class="token punctuation">&gt;</span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: implement createState</span>
    <span class="token keyword">return</span> <span class="token function">_NewsPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">MyListView</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> title<span class="token punctuation">;</span>
  <span class="token class-name">MyListView</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
        child<span class="token operator">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
          children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
            <span class="token class-name">Container</span><span class="token punctuation">(</span>
              height<span class="token operator">:</span> <span class="token number">53</span><span class="token punctuation">,</span>
              child<span class="token operator">:</span> <span class="token function">_mineItem</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Container</span><span class="token punctuation">(</span>
              color<span class="token operator">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0xffeaeaea</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              constraints<span class="token operator">:</span> <span class="token class-name">BoxConstraints</span><span class="token punctuation">.</span><span class="token function">expand</span><span class="token punctuation">(</span>height<span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">Widget</span> <span class="token function">_mineItem</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">InkWell</span><span class="token punctuation">(</span>
      onTap<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      child<span class="token operator">:</span> <span class="token class-name">Row</span><span class="token punctuation">(</span>
        children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
          <span class="token class-name">Expanded</span><span class="token punctuation">(</span>
            flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            child<span class="token operator">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
                padding<span class="token operator">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>left<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                child<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>access_time<span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">Expanded</span><span class="token punctuation">(</span>
            flex<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
            child<span class="token operator">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
              padding<span class="token operator">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>left<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              child<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
                title<span class="token punctuation">,</span>
                style<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>fontSize<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">Expanded</span><span class="token punctuation">(</span>
            flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            child<span class="token operator">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
              child<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span>
                <span class="token class-name">Icons</span><span class="token punctuation">.</span>brightness_5<span class="token punctuation">,</span>
                size<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
                color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>grey<span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> _NewsPage <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">NewsPage</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
   <span class="token class-name">String</span> goal<span class="token punctuation">;</span>
   <span class="token class-name">List</span> widgets<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

   <span class="token annotation punctuation">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">DatabaseHelper</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">queryAllRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         value<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           widgets<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>element<span class="token punctuation">[</span>&#39;goalText&#39;<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span>onError<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token function">print</span><span class="token punctuation">(</span>onError<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: implement build</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token operator">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>
        backgroundColor<span class="token operator">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0xff343434</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        leading<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>library_books<span class="token punctuation">,</span>color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        title<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;今日目标&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span><span class="token class-name">Column</span><span class="token punctuation">(</span>
        children<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token class-name">Container</span><span class="token punctuation">(</span>
            padding<span class="token operator">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">20.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            child<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span>
              style<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
                color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black<span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//TextStyle</span>
              decoration<span class="token operator">:</span> <span class="token class-name">InputDecoration</span><span class="token punctuation">(</span>
                filled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                fillColor<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
                icon<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span>
                  <span class="token class-name">Icons</span><span class="token punctuation">.</span>location_city<span class="token punctuation">,</span>
                  color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black<span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//Icon</span>
                hintText<span class="token operator">:</span> &#39;输入今天的目标吧！&#39;<span class="token punctuation">,</span>
                hintStyle<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
                  color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>grey<span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//TextStyle</span>
                border<span class="token operator">:</span> <span class="token class-name">OutlineInputBorder</span><span class="token punctuation">(</span>
                  borderRadius<span class="token operator">:</span> <span class="token class-name">BorderRadius</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
                    <span class="token class-name">Radius</span><span class="token punctuation">.</span><span class="token function">circular</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">,</span>
                  borderSide<span class="token operator">:</span> <span class="token class-name">BorderSide</span><span class="token punctuation">.</span>none<span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
              onChanged<span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
                 goal<span class="token operator">=</span>value<span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">FlatButton</span><span class="token punctuation">(</span>
             color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black<span class="token punctuation">,</span>
            onPressed<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>goal<span class="token operator">!=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                  widgets<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>goal<span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token class-name">DatabaseHelper</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Goal</span><span class="token punctuation">(</span>goalText<span class="token operator">:</span> goal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            child<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
              <span class="token char">&#39;设定目标！&#39;</span><span class="token punctuation">,</span>
              style<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
                fontSize<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
                  fontStyle<span class="token operator">:</span> <span class="token class-name">FontStyle</span><span class="token punctuation">.</span>italic<span class="token punctuation">,</span>
                color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token comment">//style: kButtonTextStyle,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">Expanded</span><span class="token punctuation">(</span>
                child<span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">ListView</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>
                  itemCount<span class="token operator">:</span> widgets<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
                  itemBuilder<span class="token operator">:</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>index<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">// return ListTile(</span>
                    <span class="token comment">//   leading: new Icon(Icons.access_time),</span>
                    <span class="token comment">//   title: Text(&#39;${widgets[index]}&#39;),</span>
                    <span class="token comment">// );</span>
                    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyListView</span><span class="token punctuation">(</span>widgets<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>自定义了列表项，没什么用，就是丰富一下加个图标。 <img src="https://img-blog.csdnimg.cn/20210106095924170.png" alt="在这里插入图片描述"> 数据库部分也很简单直接贴代码就ok了。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Goal</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> id<span class="token punctuation">;</span>
  <span class="token class-name">String</span> goalText<span class="token punctuation">;</span>
  <span class="token class-name">Goal</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token keyword">this</span> <span class="token punctuation">.</span>id<span class="token punctuation">,</span><span class="token keyword">this</span> <span class="token punctuation">.</span>goalText<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> dynamic<span class="token punctuation">&gt;</span></span> <span class="token function">toMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token char">&#39;id&#39;</span><span class="token operator">:</span>id<span class="token punctuation">,</span>&#39;goalText&#39;<span class="token operator">:</span> goalText<span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
  <span class="token keyword">class</span> <span class="token class-name">DatabaseHelper</span> <span class="token punctuation">{</span>
   <span class="token keyword">static</span> <span class="token keyword">final</span> _databaseName <span class="token operator">=</span> <span class="token string">&quot;myDB.db&quot;</span> <span class="token punctuation">;</span>
   <span class="token keyword">static</span> <span class="token keyword">final</span> _databaseVersion <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span>
   <span class="token keyword">static</span> <span class="token keyword">final</span> table <span class="token operator">=</span> <span class="token char">&#39;goal&#39;</span> <span class="token punctuation">;</span>
   <span class="token keyword">static</span> <span class="token keyword">final</span> columnId <span class="token operator">=</span> <span class="token char">&#39;id&#39;</span> <span class="token punctuation">;</span>
   <span class="token keyword">static</span> <span class="token keyword">final</span> columnTitle <span class="token operator">=</span> &#39;goalText&#39; <span class="token punctuation">;</span>
   <span class="token class-name">DatabaseHelper</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">DatabaseHelper</span> instance <span class="token operator">=</span> <span class="token class-name">DatabaseHelper</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">static</span> <span class="token class-name">Database</span> _database<span class="token punctuation">;</span>
   <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Database</span><span class="token punctuation">&gt;</span></span> get database async <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>_database <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token keyword">return</span> _database<span class="token punctuation">;</span>
   _database <span class="token operator">=</span> await <span class="token function">_initDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> _database<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token function">_initDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async <span class="token punctuation">{</span>
   <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span>await <span class="token function">getDatabasesPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _databaseName<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> await <span class="token function">openDatabase</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>
   version<span class="token operator">:</span> _databaseVersion<span class="token punctuation">,</span> onCreate<span class="token operator">:</span> _onCreate<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token class-name">Future</span> <span class="token function">_onCreate</span><span class="token punctuation">(</span><span class="token class-name">Database</span> db<span class="token punctuation">,</span> <span class="token keyword">int</span> version<span class="token punctuation">)</span> async <span class="token punctuation">{</span>
     await db<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>&#39;<span class="token char">&#39; &#39;</span>CREATE TABLE $table <span class="token punctuation">(</span>$columnId INTEGER PRIMARY <span class="token class-name">KEY</span> AUTOINCREMENT<span class="token punctuation">,</span>$columnTitle TEXT <span class="token class-name">NOT</span> NULL<span class="token punctuation">)</span>&#39;<span class="token char">&#39; &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
   <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Goal</span> goal<span class="token punctuation">)</span> async <span class="token punctuation">{</span>
      <span class="token class-name">Database</span> db <span class="token operator">=</span> await instance<span class="token punctuation">.</span>database<span class="token punctuation">;</span>
      <span class="token keyword">var</span> res <span class="token operator">=</span> await db<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>table<span class="token punctuation">,</span>goal<span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">String</span> str<span class="token operator">=</span>goal<span class="token punctuation">.</span>goalText<span class="token punctuation">;</span>
      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;add $str&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> res<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
      <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> dynamic<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryAllRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async <span class="token punctuation">{</span>
      <span class="token class-name">Database</span> db <span class="token operator">=</span> await instance<span class="token punctuation">.</span>database<span class="token punctuation">;</span>
      <span class="token keyword">var</span> res <span class="token operator">=</span> await db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> res<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后就是关于页面，实在不知道些什么就，很简单写了一些简单的介绍，就是一些文本内容不作过多介绍。 <img src="https://img-blog.csdnimg.cn/202101061002482.png" alt="在这里插入图片描述"> 为了使界面代码清晰，将一些格式封装了起来。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">const</span> kTempTextStyle <span class="token operator">=</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
  color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">100.0</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> kMessageTextStyle <span class="token operator">=</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
  color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">30.0</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> kButtonTextStyle <span class="token operator">=</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
  fontSize<span class="token operator">:</span> <span class="token number">30.0</span><span class="token punctuation">,</span>
  color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> kConditionTextStyle <span class="token operator">=</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
  fontSize<span class="token operator">:</span> <span class="token number">30.0</span><span class="token punctuation">,</span>
  color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> kTextFieldInputDecoration <span class="token operator">=</span> <span class="token class-name">InputDecoration</span><span class="token punctuation">(</span>
  filled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  fillColor<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
  icon<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span>
    <span class="token class-name">Icons</span><span class="token punctuation">.</span>location_city<span class="token punctuation">,</span>
    color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//Icon</span>
  hintText<span class="token operator">:</span> &#39;<span class="token class-name">Enter</span> <span class="token class-name">City</span> <span class="token class-name">Name</span>&#39;<span class="token punctuation">,</span>
  hintStyle<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
    color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>grey<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//TextStyle</span>
  border<span class="token operator">:</span> <span class="token class-name">OutlineInputBorder</span><span class="token punctuation">(</span>
    borderRadius<span class="token operator">:</span> <span class="token class-name">BorderRadius</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
      <span class="token class-name">Radius</span><span class="token punctuation">.</span><span class="token function">circular</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    borderSide<span class="token operator">:</span> <span class="token class-name">BorderSide</span><span class="token punctuation">.</span>none<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>完工。</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1667880394@qq.com">jackysei</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.4ff3870a.js" defer></script>
  </body>
</html>
