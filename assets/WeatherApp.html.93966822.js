import{_ as t,r as p,o as e,c as o,a as n,b as c,d as s,e as l}from"./app.4ff3870a.js";const i={},u=s("\u53C2\u8003\u4E86"),k={href:"https://blog.csdn.net/u012416045/article/details/98329872",target:"_blank",rel:"noopener noreferrer"},r=s("\u9999\u6E2F\u80D6\u4ED4\u7684\u535A\u5BA2"),d=s(",\u81EA\u5DF1\u52A0\u5165\u4E86\u4E00\u4E9B\u7B80\u5355\u7684\u4E1C\u897F\u3002\u4F5C\u4E3A\u672C\u5B66\u671F\u7684flutter\u5927\u4F5C\u4E1A\u3002 \u8FD9\u4E2Aapp\u76F8\u5F53\u7B80\u5355\u53EA\u6709\u4E94\u4E2A\u754C\u9762\u3002 \u9996\u5148\u662F\u6B22\u8FCE\u754C\u9762 "),v=n("img",{src:"https://img-blog.csdnimg.cn/20210106092102593.png",alt:"\u5728\u8FD9\u91CC\u63D2\u5165\u56FE\u7247\u63CF\u8FF0"},null,-1),m=l(`<div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span><span class="token punctuation">{</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatefulWidget</span><span class="token punctuation">&gt;</span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">_MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _MyApp <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyApp</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: implement build</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
        debugShowCheckedModeBanner<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        title<span class="token operator">:</span> <span class="token string">&quot;\u5929\u6C14app&quot;</span><span class="token punctuation">,</span>
       <span class="token comment">//theme: ThemeData.dark(),</span>
        home<span class="token operator">:</span> <span class="token class-name">WelcomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">WelcomePage</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span><span class="token punctuation">{</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatefulWidget</span><span class="token punctuation">&gt;</span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: implement createState</span>
    <span class="token keyword">return</span> <span class="token function">_WelcomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _WelcomePage <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WelcomePage</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">getLocationData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async <span class="token punctuation">{</span>
      <span class="token keyword">var</span> weatherData <span class="token operator">=</span> await <span class="token class-name">WeatherModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLocationWeather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Navigator</span><span class="token punctuation">.</span><span class="token function">pushAndRemoveUntil</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token class-name">MaterialPageRoute</span><span class="token punctuation">(</span>builder<span class="token operator">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">AppHome</span><span class="token punctuation">(</span>
          locationWeather<span class="token operator">:</span> weatherData<span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>route<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// TODO: implement build</span>
    <span class="token class-name">Future</span><span class="token punctuation">.</span><span class="token function">delayed</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">(</span>seconds<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">getLocationData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      body<span class="token operator">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
          alignment<span class="token operator">:</span> <span class="token class-name">Alignment</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span>
          child<span class="token operator">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
            children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
              <span class="token class-name">Expanded</span><span class="token punctuation">(</span>
                  flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                  child<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token class-name">Expanded</span><span class="token punctuation">(</span>
                  flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                  child<span class="token operator">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
                    children<span class="token operator">:</span> <span class="token punctuation">[</span>
                      <span class="token class-name">Image</span><span class="token punctuation">(</span>image<span class="token operator">:</span> <span class="token class-name">AssetImage</span><span class="token punctuation">(</span><span class="token string">&quot;assets/images/welcome.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                      <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Welcome To Weather App&quot;</span><span class="token punctuation">,</span>style<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>fontSize<span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span>color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>blue<span class="token punctuation">,</span>fontStyle<span class="token operator">:</span> <span class="token class-name">FontStyle</span><span class="token punctuation">.</span>italic<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">]</span><span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u52A0\u8F7D\u6B22\u8FCE\u9875\u9762\u4E24\u79D2\u540E\uFF0C\u8C03\u7528\u805A\u5408\u6570\u636E\u7684api\u8BF7\u6C42\u5929\u6C14\u6570\u636E\u3002</p><p>\u8BF7\u6C42\u7F51\u7EDC\u4E4B\u524D\u81EA\u5B9A\u4E49\u4E00\u4E2A\u5DE5\u5177\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">NetworkHelper</span><span class="token punctuation">{</span>
  <span class="token class-name">NetworkHelper</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> url<span class="token punctuation">;</span>
  <span class="token class-name">Future</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async<span class="token punctuation">{</span>
    <span class="token keyword">try</span><span class="token punctuation">{</span>
      <span class="token class-name"><span class="token namespace">http<span class="token punctuation">.</span></span>Response</span> response <span class="token operator">=</span> await http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>statusCode<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> response<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">jsonDecode</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;empty&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63A5\u53E3\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// const apiKey = &#39;a1229a6169b9ca8fa751980e7917fae5&#39;;</span>
<span class="token keyword">const</span> openWeatherMapURL <span class="token operator">=</span> &#39;http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>v<span class="token punctuation">.</span>juhe<span class="token punctuation">.</span>cn<span class="token operator">/</span>weather<span class="token operator">/</span>geo&#39;<span class="token punctuation">;</span>
<span class="token keyword">const</span> openCityWeatherMapURL <span class="token operator">=</span> &#39;http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>v<span class="token punctuation">.</span>juhe<span class="token punctuation">.</span>cn<span class="token operator">/</span>weather<span class="token operator">/</span>index&#39;<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">WeatherModel</span> <span class="token punctuation">{</span>
  <span class="token comment">//http://v.juhe.cn/weather/index?format=2&amp;cityname=%E8%8B%8F%E5%B7%9E&amp;key=\u60A8\u7533\u8BF7\u7684KEY</span>
  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span>dynamic<span class="token punctuation">&gt;</span></span> <span class="token function">getCityWeather</span><span class="token punctuation">(</span><span class="token class-name">String</span> cityName<span class="token punctuation">)</span> async<span class="token punctuation">{</span>
    <span class="token class-name">NetworkHelper</span> networkHelper <span class="token operator">=</span> <span class="token class-name">NetworkHelper</span><span class="token punctuation">(</span>&#39;$openCityWeatherMapURL<span class="token operator">?</span>format<span class="token operator">=</span><span class="token number">1</span><span class="token operator">&amp;</span>key<span class="token operator">=</span>$apiKey<span class="token operator">&amp;</span>cityname<span class="token operator">=</span>$cityName<span class="token operator">&amp;</span>dtype<span class="token operator">=</span>json&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> weatherData <span class="token operator">=</span>await networkHelper<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> weatherData<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span>dynamic<span class="token punctuation">&gt;</span></span> <span class="token function">getLocationWeather</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async<span class="token punctuation">{</span>
    <span class="token class-name">Location</span> location <span class="token operator">=</span> <span class="token class-name">Location</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    await location<span class="token punctuation">.</span><span class="token function">getCurrentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">NetworkHelper</span> networkHelper <span class="token operator">=</span> <span class="token class-name">NetworkHelper</span><span class="token punctuation">(</span>
        &#39;$openWeatherMapURL<span class="token operator">?</span>format<span class="token operator">=</span><span class="token number">2</span><span class="token operator">&amp;</span>key<span class="token operator">=</span>$apiKey<span class="token operator">&amp;</span>dtype<span class="token operator">=</span>json<span class="token operator">&amp;</span>lat<span class="token operator">=</span>$<span class="token punctuation">{</span>location<span class="token punctuation">.</span>latitude<span class="token punctuation">}</span><span class="token operator">&amp;</span>lon<span class="token operator">=</span>$<span class="token punctuation">{</span>location<span class="token punctuation">.</span>longitude<span class="token punctuation">}</span>&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> weatherData <span class="token operator">=</span> await networkHelper<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> weatherData<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token keyword">int</span> temp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">&gt;</span> <span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> &#39;\u597D\u70ED<span class="token punctuation">,</span>\u73B0\u5728\u9002\u5408\u5403\u51B0\u6DC7\u6DCB\uFF01&#39;<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> &#39;\u9002\u5408\u7A7F\u77ED\u8896<span class="token class-name">T</span>\u6064 &#39;<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> &#39;\u597D\u51B7<span class="token punctuation">,</span>\u6234\u4E0A\u56F4\u5DFE\u548C\u624B\u5957\u5427&#39;<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> &#39;\u6E29\u5EA6\u5B9C\u4EBA\uFF0C\u5F00\u5FC3\u73A9\u800D\u5427&#39;<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>getMessage\u65B9\u6CD5\u662F\u8BBE\u7F6E\u4E4B\u540E\u754C\u9762\u7684\u4E00\u4E9B\u6587\u672C\u4E30\u5BCC\u754C\u9762\u3002 \u8FD9\u91CC\u8BF4\u5230\u4E24\u79CD\u8BF7\u6C42\u805A\u5408api\u7684\u65B9\u5F0F\uFF0C\u4E00\u79CD\u662F\u901A\u8FC7\u6240\u5904\u5730\u7406\u4F4D\u7F6E\u7684\u7ECF\u7EAC\u5EA6\u3002 \u83B7\u53D6\u7ECF\u7EAC\u5EA6\u7684\u65B9\u5F0F\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Location</span><span class="token punctuation">{</span>
  <span class="token keyword">double</span> latitude<span class="token punctuation">;</span>
  <span class="token keyword">double</span> longitude<span class="token punctuation">;</span>
  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCurrentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async<span class="token punctuation">{</span>
    <span class="token keyword">try</span><span class="token punctuation">{</span>
      <span class="token class-name">Position</span> position <span class="token operator">=</span> await <span class="token class-name">Geolocator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCurrentPosition</span><span class="token punctuation">(</span>desiredAccuracy<span class="token operator">:</span> <span class="token class-name">LocationAccuracy</span><span class="token punctuation">.</span>low<span class="token punctuation">)</span><span class="token punctuation">;</span>
      latitude <span class="token operator">=</span> position<span class="token punctuation">.</span>latitude<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      longitude <span class="token operator">=</span> position<span class="token punctuation">.</span>longitude<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD8\u6709\u4E00\u79CD\u5C31\u662F\u901A\u8FC7\u57CE\u5E02\u7684\u540D\u79F0\u3002</p><p>\u8BF7\u6C42\u7684\u8FD4\u56DE\u7ED3\u679C\u6709\u591A\u79CD\u60C5\u51B5\uFF1A 1.\u624B\u673A\u6CA1\u6709\u7F51\u7EDC\u7684\u60C5\u51B5\uFF0C\u4F1A\u629B\u51FA\u4E00\u4E2A\u6CA1\u6709\u7F51\u7EDC\u5F02\u5E38\uFF0C\u81EA\u5B9A\u4E49\u8FD4\u56DE\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF0C\u65B9\u4FBF\u4E4B\u540E\u7684\u5224\u65AD\u3002 2.\u6709\u7F51\u7EDC\uFF0C\u8BF7\u6C42\u5931\u8D25\u3002 3.\u6709\u7F51\u7EDC\u8BF7\u6C42\u6210\u529F\u3002</p><p>\u6700\u540E\u65E0\u8BBA\u662F\u901A\u8FC7\u805A\u5408\u63A5\u53E3\u8FD8\u662F\u6211\u4EEC\u81EA\u5DF1\u81EA\u5B9A\u4E49\u7684\uFF0C\u8BF7\u6C42\u7F51\u7EDC\u4E4B\u540E\u90FD\u4F1A\u6709\u4E00\u4E2A\u8FD4\u56DE\u503C\uFF0C\u901A\u8FC7\u4E0D\u540C\u7684\u8FD4\u56DE\u503C\u6765\u5904\u7406\u76F8\u5173\u7684\u903B\u8F91\u3002</p><p>\u62FF\u5230\u8FD4\u56DE\u503C\u540E\uFF0C\u5C31\u628A\u8FD4\u56DE\u503C\uFF08\u65E0\u8BBA\u6210\u529F\u4E0E\u5426\uFF09\u901A\u8FC7\u6B22\u8FCE\u754C\u9762\uFF0C\u4F20\u9012\u7ED9\u4E3B\u754C\u9762\u3002 \u4E3B\u754C\u9762\u5BFC\u822A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">AppHome</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token class-name">AppHome</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>locationWeather<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> locationWeather<span class="token punctuation">;</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatefulWidget</span><span class="token punctuation">&gt;</span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: implement createState</span>
    <span class="token keyword">return</span> <span class="token function">_HomePageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _HomePageState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AppHome</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>

  <span class="token keyword">int</span> _currentIndex<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span> _widgets<span class="token operator">=</span><span class="token class-name">List</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _widgets<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">LocationScreen</span><span class="token punctuation">(</span>locationWeather<span class="token operator">:</span> widget<span class="token punctuation">.</span>locationWeather<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _widgets<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">NewsPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _widgets<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MyPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: implement build</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      body<span class="token operator">:</span> <span class="token class-name">IndexedStack</span><span class="token punctuation">(</span>
        index<span class="token operator">:</span> _currentIndex<span class="token punctuation">,</span>
        children<span class="token operator">:</span> _widgets<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      bottomNavigationBar<span class="token operator">:</span> <span class="token class-name">BottomNavigationBar</span><span class="token punctuation">(</span>
        items<span class="token operator">:</span> <span class="token keyword">const</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BottomNavigationBarItem</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
          <span class="token class-name">BottomNavigationBarItem</span><span class="token punctuation">(</span>
            icon<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>wb_sunny<span class="token punctuation">)</span><span class="token punctuation">,</span>title<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;\u4ECA\u65E5\u5929\u6C14&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">BottomNavigationBarItem</span><span class="token punctuation">(</span>
              icon<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>library_books<span class="token punctuation">)</span><span class="token punctuation">,</span>title<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;\u4ECA\u65E5\u76EE\u6807&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">BottomNavigationBarItem</span><span class="token punctuation">(</span>
              icon<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>person<span class="token punctuation">)</span><span class="token punctuation">,</span>title<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;\u5173\u4E8E\u6211\u7684&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        currentIndex<span class="token operator">:</span> _currentIndex<span class="token punctuation">,</span>
        onTap<span class="token operator">:</span> _itemTapped<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">void</span> _itemTapped <span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _currentIndex<span class="token operator">=</span>index<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E00\u4E9B\u7B80\u5355\u7684\u5199\u6CD5\uFF0C\u4E0D\u5FC5\u591A\u8A00\u3002</p><p>\u5728\u4E3B\u754C\u9762\u6DFB\u52A0\u5B50\u9875\u9762\u7684\u65F6\u5019\uFF0C\u5728\u628A\u4ECE\u6B22\u8FCE\u9875\u9762\u8BF7\u6C42\u7684\u6570\u636E\uFF0C\u901A\u8FC7\u4E3B\u9875\u9762\u4F20\u9012\u7ED9\u5929\u6C14\u9875\u9762\u3002</p><p><img src="https://img-blog.csdnimg.cn/20210106093801196.png" alt="\u5728\u8FD9\u91CC\u63D2\u5165\u56FE\u7247\u63CF\u8FF0"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">LocationScreen</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>

  <span class="token class-name">LocationScreen</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>locationWeather<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> locationWeather<span class="token punctuation">;</span>
  <span class="token annotation punctuation">@override</span>
  _LocationScreenState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_LocationScreenState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token keyword">class</span> _LocationScreenState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LocationScreen</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

  <span class="token class-name">WeatherModel</span> weather <span class="token operator">=</span> <span class="token class-name">WeatherModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> temperature<span class="token punctuation">;</span>
  <span class="token class-name">String</span> condition<span class="token punctuation">;</span>
  <span class="token class-name">String</span> cityName<span class="token punctuation">;</span>
  <span class="token class-name">String</span> imgId<span class="token operator">=</span><span class="token string">&quot;assets/images/init.JPG&quot;</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> weatherMessage<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">updateUI</span><span class="token punctuation">(</span>widget<span class="token punctuation">.</span>locationWeather<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">updateUI</span><span class="token punctuation">(</span>dynamic weatherData<span class="token punctuation">)</span> async <span class="token punctuation">{</span>
    <span class="token class-name">SharedPreferences</span> prefs<span class="token operator">=</span>await <span class="token class-name">SharedPreferences</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    prefs<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>&#39;temperature&#39;<span class="token punctuation">,</span> <span class="token string">&quot;\u2205&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    prefs<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>&#39;condition&#39;<span class="token punctuation">,</span> <span class="token string">&quot;\u672A\u77E5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    prefs<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>&#39;weatherMessage&#39;<span class="token punctuation">,</span> <span class="token string">&quot;\u6CA1\u6709\u67E5\u5230\u5929\u6C14&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    prefs<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>&#39;cityName<span class="token char">&#39;, &#39;</span>\u7EF5\u9633&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
    prefs<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token char">&#39;imgId&#39;</span><span class="token punctuation">,</span> &#39;assets<span class="token operator">/</span>images<span class="token operator">/</span>init<span class="token punctuation">.</span>JPG&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>weatherData<span class="token operator">==</span><span class="token string">&quot;empty&quot;</span><span class="token operator">||</span>weatherData<span class="token punctuation">[</span><span class="token char">&#39;result&#39;</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        temperature <span class="token operator">=</span> prefs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>&#39;temperature&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
        condition <span class="token operator">=</span> prefs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>&#39;condition&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
        weatherMessage <span class="token operator">=</span> prefs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>&#39;weatherMessage&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cityName <span class="token operator">=</span> prefs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>&#39;cityName&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span>
        imgId<span class="token operator">=</span>prefs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token char">&#39;imgId&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> result <span class="token operator">=</span> weatherData<span class="token punctuation">[</span><span class="token char">&#39;result&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> sk <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token char">&#39;sk&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> today <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token char">&#39;today&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        temperature <span class="token operator">=</span> sk<span class="token punctuation">[</span><span class="token char">&#39;temp&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        cityName <span class="token operator">=</span> weatherData<span class="token punctuation">[</span><span class="token char">&#39;result&#39;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token char">&#39;today&#39;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token char">&#39;city&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        condition <span class="token operator">=</span> today<span class="token punctuation">[</span>&#39;weather&#39;<span class="token punctuation">]</span><span class="token punctuation">;</span>
        weatherMessage <span class="token operator">=</span> weather<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>temperature<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;\u96E8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          imgId<span class="token operator">=</span><span class="token string">&quot;assets/images/rain.jpg&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;\u6674&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          imgId<span class="token operator">=</span><span class="token string">&quot;assets/images/qing.png&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;\u591A\u4E91&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          imgId<span class="token operator">=</span><span class="token string">&quot;assets/images/duoyun.png&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token operator">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>
        leading<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>wb_sunny<span class="token punctuation">,</span>color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        title<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;\u4ECA\u65E5\u5929\u6C14&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        backgroundColor<span class="token operator">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0xff343434</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
        decoration<span class="token operator">:</span> <span class="token class-name">BoxDecoration</span><span class="token punctuation">(</span>
          image<span class="token operator">:</span> <span class="token class-name">DecorationImage</span><span class="token punctuation">(</span>
            image<span class="token operator">:</span> <span class="token class-name">AssetImage</span><span class="token punctuation">(</span>imgId<span class="token operator">==</span><span class="token keyword">null</span><span class="token operator">?</span>&#39;assets<span class="token operator">/</span>images<span class="token operator">/</span>init<span class="token punctuation">.</span>JPG&#39;<span class="token operator">:</span>imgId<span class="token punctuation">)</span><span class="token punctuation">,</span>
            fit<span class="token operator">:</span> <span class="token class-name">BoxFit</span><span class="token punctuation">.</span>cover<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">//constraints: BoxConstraints.expand(),</span>
        child<span class="token operator">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
          mainAxisAlignment<span class="token operator">:</span> <span class="token class-name">MainAxisAlignment</span><span class="token punctuation">.</span>spaceBetween<span class="token punctuation">,</span>
          crossAxisAlignment<span class="token operator">:</span> <span class="token class-name">CrossAxisAlignment</span><span class="token punctuation">.</span>stretch<span class="token punctuation">,</span>
          children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
            <span class="token class-name">Row</span><span class="token punctuation">(</span>
              mainAxisAlignment<span class="token operator">:</span> <span class="token class-name">MainAxisAlignment</span><span class="token punctuation">.</span>spaceBetween<span class="token punctuation">,</span>
              children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
                <span class="token class-name">FlatButton</span><span class="token punctuation">(</span>
                  onPressed<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> async <span class="token punctuation">{</span>
                    <span class="token keyword">var</span> weatherData <span class="token operator">=</span> await weather<span class="token punctuation">.</span><span class="token function">getLocationWeather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">updateUI</span><span class="token punctuation">(</span>weatherData<span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  child<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span>
                    <span class="token class-name">Icons</span><span class="token punctuation">.</span>near_me<span class="token punctuation">,</span>
                    color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
                    size<span class="token operator">:</span> <span class="token number">50.0</span><span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">FlatButton</span><span class="token punctuation">(</span>
                  onPressed<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> async<span class="token punctuation">{</span>
                    <span class="token keyword">var</span> typedName <span class="token operator">=</span>await <span class="token class-name">Navigator</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
                      context<span class="token punctuation">,</span>
                      <span class="token class-name">MaterialPageRoute</span><span class="token punctuation">(</span>
                        builder<span class="token operator">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                          <span class="token keyword">return</span> <span class="token class-name">CityScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                      <span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>typedName<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                      <span class="token keyword">var</span> weatherData <span class="token operator">=</span> await weather<span class="token punctuation">.</span><span class="token function">getCityWeather</span><span class="token punctuation">(</span>typedName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token function">updateUI</span><span class="token punctuation">(</span>weatherData<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  child<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span>
                    <span class="token class-name">Icons</span><span class="token punctuation">.</span>location_city<span class="token punctuation">,</span>
                    color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
                    size<span class="token operator">:</span> <span class="token number">50.0</span><span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Padding</span><span class="token punctuation">(</span>
              padding<span class="token operator">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>left<span class="token operator">:</span> <span class="token number">15.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              child<span class="token operator">:</span> <span class="token class-name">Row</span><span class="token punctuation">(</span>
                children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
                  <span class="token class-name">Text</span><span class="token punctuation">(</span>
                    &#39;$temperature\xB0&#39;<span class="token punctuation">,</span>
                    style<span class="token operator">:</span> kTempTextStyle<span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token class-name">Text</span><span class="token punctuation">(</span>
                    condition<span class="token punctuation">,</span>
                    style<span class="token operator">:</span> kConditionTextStyle<span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Padding</span><span class="token punctuation">(</span>
              padding<span class="token operator">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>right<span class="token operator">:</span> <span class="token number">15.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              child<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
                &#39;$weatherMessage in $cityName&#39;<span class="token punctuation">,</span>
                textAlign<span class="token operator">:</span> <span class="token class-name">TextAlign</span><span class="token punctuation">.</span>right<span class="token punctuation">,</span>
                style<span class="token operator">:</span> kMessageTextStyle<span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u518D\u8BF4\u56DE\u4E4B\u524D\u8BF7\u6C42\u7684\u60C5\u51B5\uFF0C\u5982\u679C\u662F\u6CA1\u6709\u7F51\u7EDC\u5219\u6355\u83B7\u5F02\u5E38\u8FD4\u56DE\u201Cempty\u201D\uFF0C\u5982\u679C\u6709\u7F51\u7EDC\u4F46\u8BF7\u6C42\u5931\u8D25\uFF0C\u8FD4\u56DE\u7684\u6570\u636E\u4E2D\u7684result==null\uFF08\u8BD5\u51FA\u6765\u7684\uFF09 \u901A\u8FC7\u4EE5\u4E0A\u4EE3\u7801\uFF0C\u53EF\u4EE5\u770B\u51FA\u6765\uFF0C\u6211\u628A\u8FD9\u4E24\u79CD\u60C5\u51B5\u653E\u5728\u4E00\u8D77\uFF0C\u5F53\u6761\u4EF6\u6EE1\u8DB3\u65F6\uFF0C\u52A0\u8F7DSharedPreferences \u5B58\u50A8\u597D\u7684\u6570\u636E\uFF08\u5176\u5B9E\u6CA1\u5FC5\u8981\u7528\uFF0C\u6211\u7528\u662F\u4E3A\u4E86\u5B8C\u6210\u8001\u5E08\u7684\u6253\u5206\u70B9\uFF09\u3002 <img src="https://img-blog.csdnimg.cn/20210106095259620.png" alt="\u5728\u8FD9\u91CC\u63D2\u5165\u56FE\u7247\u63CF\u8FF0"></p><p>\u7136\u540E\u5C31\u662F\u8BF7\u6C42\u6210\u529F\u7684\u60C5\u51B5\uFF0C\u89E3\u6790\u76F8\u5E94\u7684json\u4E32\uFF0C\u66F4\u65B0ui\u3002\u901A\u8FC7\u8FD4\u56DE\u7684\u4E0D\u540C\u7684\u5929\u6C14\u72B6\u51B5\uFF0C\u6E29\u5EA6\uFF0C\u8BBE\u7F6E\u4E0D\u540C\u7684\u80CC\u666F\u56FE\u7247\uFF0C\u901A\u8FC7getMessage\uFF08\uFF09\u63D0\u793A\u4E0D\u540C\u7684\u8BED\u53E5\u3002</p><p>\u53F3\u4E0A\u89D2\u7684\u6309\u94AE\u662F\u8FDB\u5165\u57CE\u5E02\u9009\u62E9\u754C\u9762</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">CityScreen</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@override</span>
  _CityScreenState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_CityScreenState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _CityScreenState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CityScreen</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> cityName<span class="token punctuation">;</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      resizeToAvoidBottomInset<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      appBar<span class="token operator">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>title<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;\u9009\u62E9\u57CE\u5E02&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> backgroundColor<span class="token operator">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0xff343434</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
        decoration<span class="token operator">:</span> <span class="token class-name">BoxDecoration</span><span class="token punctuation">(</span>
          image<span class="token operator">:</span> <span class="token class-name">DecorationImage</span><span class="token punctuation">(</span>
            image<span class="token operator">:</span> <span class="token class-name">AssetImage</span><span class="token punctuation">(</span><span class="token string">&quot;assets/images/city_bac.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            fit<span class="token operator">:</span> <span class="token class-name">BoxFit</span><span class="token punctuation">.</span>cover<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        constraints<span class="token operator">:</span> <span class="token class-name">BoxConstraints</span><span class="token punctuation">.</span><span class="token function">expand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          child<span class="token operator">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
            children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
              <span class="token class-name">Container</span><span class="token punctuation">(</span>
                padding<span class="token operator">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">20.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                child<span class="token operator">:</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span>
                  style<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
                    color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black<span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//TextStyle</span>
                  decoration<span class="token operator">:</span> kTextFieldInputDecoration<span class="token punctuation">,</span>
                  onChanged<span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    cityName <span class="token operator">=</span> value<span class="token punctuation">;</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token class-name">FlatButton</span><span class="token punctuation">(</span>
                onPressed<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token class-name">Navigator</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>cityName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                child<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
                  &#39;<span class="token class-name">Get</span> <span class="token class-name">Weather</span>&#39;<span class="token punctuation">,</span>
                  style<span class="token operator">:</span> kButtonTextStyle<span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://img-blog.csdnimg.cn/20210106095443873.png" alt="\u5728\u8FD9\u91CC\u63D2\u5165\u56FE\u7247\u63CF\u8FF0"> \u8F93\u5165\u57CE\u5E02\u5C31\u53EF\u4EE5\u67E5\u5230\u76F8\u5E94\u57CE\u5E02\u7684\u5929\u6C14 \u5DE6\u4E0A\u89D2\u7684\u6309\u94AE\u5219\u662F\u5B9A\u4F4D\u5230\u5F53\u524D\u4F4D\u7F6E\uFF0C\u83B7\u53D6\u5F53\u524D\u4F4D\u7F6E\u7684\u5929\u6C14\u3002</p><p>\u4E3A\u4E86\u5B8C\u6210\u8001\u5E08\u7684\u8003\u6838\u70B9\uFF0C\u8BBE\u7F6E\u7B2C\u4E8C\u4E2A\u754C\u9762\u8BBE\u5B9A\u76EE\u6807\u754C\u9762\uFF0C\u5176\u5B9E\u5F88\u7B80\u5355\u3002\u5C31\u662F\u6DFB\u52A0\u4E86\u4E00\u4E2A\u6587\u672C\u6846\uFF0C\u70B9\u51FB\u6309\u94AE\uFF0C\u5C06\u6587\u672C\u6846\u7684\u5185\u5BB9\u6DFB\u52A0\u5230\u4E0B\u65B9\u7684\u5217\u8868\u89C6\u56FE\u4E2D\uFF0C\u5E76\u4FDD\u5B58\u5230\u6570\u636E\u5E93\u4E2D\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">NewsPage</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span><span class="token punctuation">{</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatefulWidget</span><span class="token punctuation">&gt;</span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: implement createState</span>
    <span class="token keyword">return</span> <span class="token function">_NewsPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">MyListView</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> title<span class="token punctuation">;</span>
  <span class="token class-name">MyListView</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
        child<span class="token operator">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
          children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
            <span class="token class-name">Container</span><span class="token punctuation">(</span>
              height<span class="token operator">:</span> <span class="token number">53</span><span class="token punctuation">,</span>
              child<span class="token operator">:</span> <span class="token function">_mineItem</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Container</span><span class="token punctuation">(</span>
              color<span class="token operator">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0xffeaeaea</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              constraints<span class="token operator">:</span> <span class="token class-name">BoxConstraints</span><span class="token punctuation">.</span><span class="token function">expand</span><span class="token punctuation">(</span>height<span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">Widget</span> <span class="token function">_mineItem</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">InkWell</span><span class="token punctuation">(</span>
      onTap<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      child<span class="token operator">:</span> <span class="token class-name">Row</span><span class="token punctuation">(</span>
        children<span class="token operator">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
          <span class="token class-name">Expanded</span><span class="token punctuation">(</span>
            flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            child<span class="token operator">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
                padding<span class="token operator">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>left<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                child<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>access_time<span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">Expanded</span><span class="token punctuation">(</span>
            flex<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
            child<span class="token operator">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
              padding<span class="token operator">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>left<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              child<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
                title<span class="token punctuation">,</span>
                style<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>fontSize<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">Expanded</span><span class="token punctuation">(</span>
            flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            child<span class="token operator">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
              child<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span>
                <span class="token class-name">Icons</span><span class="token punctuation">.</span>brightness_5<span class="token punctuation">,</span>
                size<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
                color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>grey<span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> _NewsPage <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">NewsPage</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
   <span class="token class-name">String</span> goal<span class="token punctuation">;</span>
   <span class="token class-name">List</span> widgets<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

   <span class="token annotation punctuation">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">DatabaseHelper</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">queryAllRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         value<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           widgets<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>element<span class="token punctuation">[</span>&#39;goalText&#39;<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span>onError<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token function">print</span><span class="token punctuation">(</span>onError<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: implement build</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token operator">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>
        backgroundColor<span class="token operator">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0xff343434</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        leading<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>library_books<span class="token punctuation">,</span>color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        title<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;\u4ECA\u65E5\u76EE\u6807&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span><span class="token class-name">Column</span><span class="token punctuation">(</span>
        children<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token class-name">Container</span><span class="token punctuation">(</span>
            padding<span class="token operator">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">20.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            child<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span>
              style<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
                color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black<span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//TextStyle</span>
              decoration<span class="token operator">:</span> <span class="token class-name">InputDecoration</span><span class="token punctuation">(</span>
                filled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                fillColor<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
                icon<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span>
                  <span class="token class-name">Icons</span><span class="token punctuation">.</span>location_city<span class="token punctuation">,</span>
                  color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black<span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//Icon</span>
                hintText<span class="token operator">:</span> &#39;\u8F93\u5165\u4ECA\u5929\u7684\u76EE\u6807\u5427\uFF01&#39;<span class="token punctuation">,</span>
                hintStyle<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
                  color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>grey<span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//TextStyle</span>
                border<span class="token operator">:</span> <span class="token class-name">OutlineInputBorder</span><span class="token punctuation">(</span>
                  borderRadius<span class="token operator">:</span> <span class="token class-name">BorderRadius</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
                    <span class="token class-name">Radius</span><span class="token punctuation">.</span><span class="token function">circular</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">,</span>
                  borderSide<span class="token operator">:</span> <span class="token class-name">BorderSide</span><span class="token punctuation">.</span>none<span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
              onChanged<span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
                 goal<span class="token operator">=</span>value<span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">FlatButton</span><span class="token punctuation">(</span>
             color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black<span class="token punctuation">,</span>
            onPressed<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>goal<span class="token operator">!=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                  widgets<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>goal<span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token class-name">DatabaseHelper</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Goal</span><span class="token punctuation">(</span>goalText<span class="token operator">:</span> goal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            child<span class="token operator">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
              <span class="token char">&#39;\u8BBE\u5B9A\u76EE\u6807\uFF01&#39;</span><span class="token punctuation">,</span>
              style<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
                fontSize<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
                  fontStyle<span class="token operator">:</span> <span class="token class-name">FontStyle</span><span class="token punctuation">.</span>italic<span class="token punctuation">,</span>
                color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token comment">//style: kButtonTextStyle,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">Expanded</span><span class="token punctuation">(</span>
                child<span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">ListView</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>
                  itemCount<span class="token operator">:</span> widgets<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
                  itemBuilder<span class="token operator">:</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>index<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">// return ListTile(</span>
                    <span class="token comment">//   leading: new Icon(Icons.access_time),</span>
                    <span class="token comment">//   title: Text(&#39;\${widgets[index]}&#39;),</span>
                    <span class="token comment">// );</span>
                    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyListView</span><span class="token punctuation">(</span>widgets<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u81EA\u5B9A\u4E49\u4E86\u5217\u8868\u9879\uFF0C\u6CA1\u4EC0\u4E48\u7528\uFF0C\u5C31\u662F\u4E30\u5BCC\u4E00\u4E0B\u52A0\u4E2A\u56FE\u6807\u3002 <img src="https://img-blog.csdnimg.cn/20210106095924170.png" alt="\u5728\u8FD9\u91CC\u63D2\u5165\u56FE\u7247\u63CF\u8FF0"> \u6570\u636E\u5E93\u90E8\u5206\u4E5F\u5F88\u7B80\u5355\u76F4\u63A5\u8D34\u4EE3\u7801\u5C31ok\u4E86\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Goal</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> id<span class="token punctuation">;</span>
  <span class="token class-name">String</span> goalText<span class="token punctuation">;</span>
  <span class="token class-name">Goal</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token keyword">this</span> <span class="token punctuation">.</span>id<span class="token punctuation">,</span><span class="token keyword">this</span> <span class="token punctuation">.</span>goalText<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> dynamic<span class="token punctuation">&gt;</span></span> <span class="token function">toMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token char">&#39;id&#39;</span><span class="token operator">:</span>id<span class="token punctuation">,</span>&#39;goalText&#39;<span class="token operator">:</span> goalText<span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
  <span class="token keyword">class</span> <span class="token class-name">DatabaseHelper</span> <span class="token punctuation">{</span>
   <span class="token keyword">static</span> <span class="token keyword">final</span> _databaseName <span class="token operator">=</span> <span class="token string">&quot;myDB.db&quot;</span> <span class="token punctuation">;</span>
   <span class="token keyword">static</span> <span class="token keyword">final</span> _databaseVersion <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span>
   <span class="token keyword">static</span> <span class="token keyword">final</span> table <span class="token operator">=</span> <span class="token char">&#39;goal&#39;</span> <span class="token punctuation">;</span>
   <span class="token keyword">static</span> <span class="token keyword">final</span> columnId <span class="token operator">=</span> <span class="token char">&#39;id&#39;</span> <span class="token punctuation">;</span>
   <span class="token keyword">static</span> <span class="token keyword">final</span> columnTitle <span class="token operator">=</span> &#39;goalText&#39; <span class="token punctuation">;</span>
   <span class="token class-name">DatabaseHelper</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">DatabaseHelper</span> instance <span class="token operator">=</span> <span class="token class-name">DatabaseHelper</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">static</span> <span class="token class-name">Database</span> _database<span class="token punctuation">;</span>
   <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Database</span><span class="token punctuation">&gt;</span></span> get database async <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>_database <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token keyword">return</span> _database<span class="token punctuation">;</span>
   _database <span class="token operator">=</span> await <span class="token function">_initDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> _database<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token function">_initDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async <span class="token punctuation">{</span>
   <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span>await <span class="token function">getDatabasesPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _databaseName<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> await <span class="token function">openDatabase</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>
   version<span class="token operator">:</span> _databaseVersion<span class="token punctuation">,</span> onCreate<span class="token operator">:</span> _onCreate<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token class-name">Future</span> <span class="token function">_onCreate</span><span class="token punctuation">(</span><span class="token class-name">Database</span> db<span class="token punctuation">,</span> <span class="token keyword">int</span> version<span class="token punctuation">)</span> async <span class="token punctuation">{</span>
     await db<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>&#39;<span class="token char">&#39; &#39;</span>CREATE TABLE $table <span class="token punctuation">(</span>$columnId INTEGER PRIMARY <span class="token class-name">KEY</span> AUTOINCREMENT<span class="token punctuation">,</span>$columnTitle TEXT <span class="token class-name">NOT</span> NULL<span class="token punctuation">)</span>&#39;<span class="token char">&#39; &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
   <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Goal</span> goal<span class="token punctuation">)</span> async <span class="token punctuation">{</span>
      <span class="token class-name">Database</span> db <span class="token operator">=</span> await instance<span class="token punctuation">.</span>database<span class="token punctuation">;</span>
      <span class="token keyword">var</span> res <span class="token operator">=</span> await db<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>table<span class="token punctuation">,</span>goal<span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">String</span> str<span class="token operator">=</span>goal<span class="token punctuation">.</span>goalText<span class="token punctuation">;</span>
      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;add $str&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> res<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
      <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> dynamic<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryAllRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span> async <span class="token punctuation">{</span>
      <span class="token class-name">Database</span> db <span class="token operator">=</span> await instance<span class="token punctuation">.</span>database<span class="token punctuation">;</span>
      <span class="token keyword">var</span> res <span class="token operator">=</span> await db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> res<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6700\u540E\u5C31\u662F\u5173\u4E8E\u9875\u9762\uFF0C\u5B9E\u5728\u4E0D\u77E5\u9053\u4E9B\u4EC0\u4E48\u5C31\uFF0C\u5F88\u7B80\u5355\u5199\u4E86\u4E00\u4E9B\u7B80\u5355\u7684\u4ECB\u7ECD\uFF0C\u5C31\u662F\u4E00\u4E9B\u6587\u672C\u5185\u5BB9\u4E0D\u4F5C\u8FC7\u591A\u4ECB\u7ECD\u3002 <img src="https://img-blog.csdnimg.cn/202101061002482.png" alt="\u5728\u8FD9\u91CC\u63D2\u5165\u56FE\u7247\u63CF\u8FF0"> \u4E3A\u4E86\u4F7F\u754C\u9762\u4EE3\u7801\u6E05\u6670\uFF0C\u5C06\u4E00\u4E9B\u683C\u5F0F\u5C01\u88C5\u4E86\u8D77\u6765\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">const</span> kTempTextStyle <span class="token operator">=</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
  color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">100.0</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> kMessageTextStyle <span class="token operator">=</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
  color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">30.0</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> kButtonTextStyle <span class="token operator">=</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
  fontSize<span class="token operator">:</span> <span class="token number">30.0</span><span class="token punctuation">,</span>
  color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> kConditionTextStyle <span class="token operator">=</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
  fontSize<span class="token operator">:</span> <span class="token number">30.0</span><span class="token punctuation">,</span>
  color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> kTextFieldInputDecoration <span class="token operator">=</span> <span class="token class-name">InputDecoration</span><span class="token punctuation">(</span>
  filled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  fillColor<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
  icon<span class="token operator">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span>
    <span class="token class-name">Icons</span><span class="token punctuation">.</span>location_city<span class="token punctuation">,</span>
    color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//Icon</span>
  hintText<span class="token operator">:</span> &#39;<span class="token class-name">Enter</span> <span class="token class-name">City</span> <span class="token class-name">Name</span>&#39;<span class="token punctuation">,</span>
  hintStyle<span class="token operator">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
    color<span class="token operator">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>grey<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//TextStyle</span>
  border<span class="token operator">:</span> <span class="token class-name">OutlineInputBorder</span><span class="token punctuation">(</span>
    borderRadius<span class="token operator">:</span> <span class="token class-name">BorderRadius</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
      <span class="token class-name">Radius</span><span class="token punctuation">.</span><span class="token function">circular</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    borderSide<span class="token operator">:</span> <span class="token class-name">BorderSide</span><span class="token punctuation">.</span>none<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B8C\u5DE5\u3002</p>`,30);function b(g,y){const a=p("ExternalLinkIcon");return e(),o("div",null,[n("p",null,[u,n("a",k,[r,c(a)]),d,v]),m])}var f=t(i,[["render",b],["__file","WeatherApp.html.vue"]]);export{f as default};
